# Home Links - Kubernetes Manifest
# Deploy with: kubectl apply -f kubernetes.yaml

---
# 1. Namespace
apiVersion: v1
kind: Namespace
metadata:
  name: home-links
  labels:
    app.kubernetes.io/name: home-links

---
# 2. ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: home-links-config
  namespace: home-links
  labels:
    app.kubernetes.io/name: home-links
data:
  config.json: |
    {
      "title": "Home Links",
      "subtitle": "Your personalized home page",
      "footer": "Â© 2026 Home Links",
      "sections": [
        {
          "id": "productivity",
          "title": "Productivity",
          "icon": "âš¡",
          "links": [
            {"name": "Gmail", "url": "https://gmail.com", "icon": "ğŸ“§", "description": "Email"},
            {"name": "Google Drive", "url": "https://drive.google.com", "icon": "ğŸ“", "description": "Cloud storage"},
            {"name": "Notion", "url": "https://notion.so", "icon": "ğŸ“", "description": "Notes & Docs"}
          ]
        },
        {
          "id": "dev",
          "title": "Development",
          "icon": "ğŸ’»",
          "links": [
            {"name": "GitHub", "url": "https://github.com", "icon": "ğŸ™", "description": "Code hosting"},
            {"name": "GitLab", "url": "https://gitlab.com", "icon": "ğŸ¦Š", "description": "DevOps platform"},
            {"name": "Stack Overflow", "url": "https://stackoverflow.com", "icon": "ğŸ“š", "description": "Q&A"}
          ]
        },
        {
          "id": "social",
          "title": "Social",
          "icon": "ğŸŒ",
          "links": [
            {"name": "Twitter/X", "url": "https://x.com", "icon": "ğŸ¦", "description": "Microblogging"},
            {"name": "LinkedIn", "url": "https://linkedin.com", "icon": "ğŸ’¼", "description": "Professional network"},
            {"name": "Reddit", "url": "https://reddit.com", "icon": "ğŸ”´", "description": "Forums"}
          ]
        },
        {
          "id": "media",
          "title": "Media",
          "icon": "ğŸ¬",
          "links": [
            {"name": "YouTube", "url": "https://youtube.com", "icon": "â–¶ï¸", "description": "Videos"},
            {"name": "Spotify", "url": "https://spotify.com", "icon": "ğŸµ", "description": "Music"},
            {"name": "Netflix", "url": "https://netflix.com", "icon": "ğŸ¥", "description": "Streaming"}
          ]
        }
      ]
    }

---
# 3. Service
apiVersion: v1
kind: Service
metadata:
  name: home-links
  namespace: home-links
  labels:
    app.kubernetes.io/name: home-links
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/name: home-links
  ports:
    - name: http
      port: 80
      targetPort: 3000
      protocol: TCP

---
# 4. Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: home-links
  namespace: home-links
  labels:
    app.kubernetes.io/name: home-links
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: home-links
  template:
    metadata:
      labels:
        app.kubernetes.io/name: home-links
    spec:
      containers:
        - name: home-links
          image: ghcr.io/cyrilbkr/home-links-pv:latest
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 3000
          volumeMounts:
            - name: config
              mountPath: /app/dist/config.json
              subPath: config.json
              readOnly: true
          livenessProbe:
            httpGet:
              path: /
              port: 3000
            initialDelaySeconds: 3
            periodSeconds: 30
            timeoutSeconds: 3
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /
              port: 3000
            initialDelaySeconds: 2
            periodSeconds: 10
            timeoutSeconds: 3
            failureThreshold: 3
      volumes:
        - name: config
          configMap:
            name: home-links-config
